# 缓存穿透、击穿、雪崩

| 问题     | 原因                                                                                                                                   | 解决办法                                                                                                                                                                                                                                                                                                                     |
| -------- | -------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 缓存击穿 | 某个热点数据在某一个时刻失效，大量请求落到到数据库                                                                                     | 1. 设置热点数据不过期<br/> 2. 互斥锁：只有部分请求落到数据库，并更新缓存，其他的请求阻塞；                                                                                                                                                                                                                                   |
| 缓存穿透 | 大量非法请求或者请求数据未命中缓存，或者每次请求都绕过缓存。                                                                           | 1. 针对非法请求控制，进行请求参数合法校验；<br/>2. 布隆过滤器                                                                                                                                                                                                                                                                |
| 缓存雪崩 | 大量缓存数据同时过期，导致本应请求到缓存的需重新从数据库中获取数据；<br/> redis 本身出现故障，无法处理请求，那自然会再请求到数据库那里 | 实际设置过期时间时，应当尽量避免大量 key 同时过期的场景，通过随机、微调、均匀设置等方式设置过期时间，从而避免同一时间过期；<br/> 添加互斥锁，使得构建缓存的操作不会在同一时间进行；<br/> 添加互斥锁，使得构建缓存的操作不会在同一时间进行；<br/> 后台更新缓存策略，采用定时任务或者消息队列的方式进行 redis 缓存更新或移除等 |
