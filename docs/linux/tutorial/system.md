# Linux 系统管理

## Linux 软件安装管理

- centos 中软件安装包 `.rpm`, yum 是 RPM 包软件管理器
- 在 ubuntu 中软件安装包 `.deb`，使用 apt 管理软件；

### yum 命令

centos 中软件安装包 `.rpm`, yum 是 RPM 包软件管理器，用于自动化安装配置 Linux 软件，并可以自动解决依赖问题。

#### 命令语法

`yum [-y] [install | remove | search] 软件名称`

- `-y`，自动确认，无需手动确认安装或卸载过程。

### apt 命令

在 ubuntu 中软件安装包 `.deb`，使用 apt 管理软件；

`apt [-y] [install | remove | search] 软件名称`

## Linux 系统服务管理

### systemctl 命令

命令语法：`systemctl [ start | status | stop | enable | disenable ] 服务名`

## 文件链接 - ln 命令

文件链接主要分为硬链接、软连接两种；

语法： `ln [选项] [源文件或目录] [目标文件或目录]`

- `-s`，创建软连接；

## 网络管理

### ifconfig 命令

ifconfig 命令用来查看和配置网络设备。当网络环境发生改变时可通过此命令对网络进行相应的配置

### ping 命令

命令语法 `ping [-c num] ip/主机名`

- `-c`，检查次数;

## 端口管理

Linux 系统可以支持 65535 （2^16-1）个端口，其中端口可分为三类：

- 公认端口，范围 1 ～ 1023，一般是系统内置或主流程序预留使用，如：ssh：22，https：443 等；
- 注册端口，范围 1024 ～ 49151，通常可以随意使用，用于松散的绑定一些程序或服务；
- 动态端口，范围 49151 ～ 65535，通常不会固定绑定程序，程序对外连接时，临时使用；

### lsof 查看端口占用命令

Linux 查看端口占用情况可以使用 lsof 和 netstat 命令。

lsof(list open files)是一个列出当前系统打开文件的工具。

#### 语法格式

`lsof -i:端口号`

#### 实例

```shell
## 查看服务器 8000 端口的占用情况：
lsof -i:8000
```

### netstat 命令

netstat 用于显示与 IP、TCP、UDP 和 ICMP 协议相关的统计数据，一般用于检验本机各端口的网络连接情况。

安装软件：`yun -y install net-tools`

#### 命令语法

`netstat -tunlp | grep 端口号`

#### 命令参数说明：

- `-t` (tcp) 仅显示 tcp 相关选项
- `-u` (udp)仅显示 udp 相关选项
- `-n` 拒绝显示别名，能显示数字的全部转化为数字
- `-l` 仅列出在 Listen(监听)的服务状态
- `-p` 显示建立相关链接的程序名

#### 实例：

```shell
## 列出所有端口
netstat -a

## 显示当前UDP连接状况
netstat -nu

## 显示网卡列表
netstat -i

## 找出程序运行的端口
netstat -ap | grep ssh

##
netstat -anp | grep 端口号
```

## 进程管理

### 显示进程状态 - ps 命令

ps 命令是 Process Status 的缩写，用来显示当前进程的状态

#### 命令语法

`ps [选项]`

#### 常用命令选项

- `ps aux`，可以查看系统中所有的进程；
- `ps -le`，可以查看系统中所有的进程，而且还能看到进程的父进程的 PID 和进程优先级；
- `ps -l`，只看当前 shell 产生的进程；
- `ps -ef`，列出全部进程的全部信息；

### 监控进程状态 - top 命令

ps 命令可以一次性给出当前系统中进程状态，但使用此方式得到的信息缺乏时效性。top 命令可以动态地持续监听进程地运行状态，与此同时，该命令还提供了一个交互界面，用户可以根据需要，人性化地定制自己的输出，进而更清楚地了进程的运行状态。

#### 命令语法

`top [选项]`

#### 选项参数

- `-p PID`，仅查看指定 ID 的进程；
- `-u 用户名`，只监听某个用户的进程；

### 发送信号 - kill 命令

kill 从字面来看，就是用来杀死进程的命令，但事实上，这个或多或少带有一定的误导性。从本质上讲，kill 命令只是用来向进程发送一个信号，至于这个信号是什么，是用户指定的。

kill 命令的执行原理是这样的，kill 命令会向操作系统内核发送一个信号（多是终止信号）和目标进程的 PID，然后系统内核根据收到的信号类型，对指定进程进行相应的操作。

#### 命令语法

`kill [信号] PID`

#### 信号参数

| 信号编号 | 信号名 | 含义                                                                                   |
| -------- | ------ | -------------------------------------------------------------------------------------- |
| 0        | EXIT   | 程序退出时收到该信息。                                                                 |
| 1        | HUP    | 挂掉电话线或终端连接的挂起信号，这个信号也会造成某些进程在没有终止的情况下重新初始化。 |
| 2        | INT    | 表示结束进程，但并不是强制性的，常用的 "Ctrl+C" 组合键发出就是一个 kill -2 的信号。    |
| 3        | QUIT   | 退出。                                                                                 |
| 9        | KILL   | 杀死进程，即强制结束进程。                                                             |
| 11       | SEGV   | 段错误。                                                                               |
| 15       | TERM   | 正常结束进程，是 kill 命令的默认信号。                                                 |

#### 常用命令示例

- `kill -9 进程ID`，强制关闭进程；

## 环境变量

### 环境变量作用

### `$` 符号作用

```shell
echo $PATH

echo ${PATH}ABC
```

### 配置环境变量

linux 配置主要分为：

- 临时设置，语法 `export 变量名=变量值`；
- 永久生效：
  - 针对当前用户生效，配置在当前用户的 `~/.bashrc` 文件中；
  - 针对所有用户生效，配置在系统的 `/etc/profile` 文件中；
  - 并执行语法：`source 配置文件`，进行立即生效，或重新连接 shell 生效；

配置 Java 环境变量， `vim /etc/profile`示例：

```shell
export JAVA_HOME=/user/local/server/jdk
export PATH=$PATH:$JAVA_HOME/bin
```

## 上传和下载

安装软件 `yum install lrzsz`

相关命令

- rz 命令进行上传
- sz 命令进行下载

```

```
